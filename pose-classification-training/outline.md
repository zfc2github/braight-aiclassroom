# 姿态分类训练应用项目结构

## 文件组织

```
/mnt/okcomputer/output/
├── index.html              # 主页面 - 姿态分类训练应用
├── resources/              # 资源文件夹
│   ├── hero-bg.jpg         # 背景图片
│   ├── demo-pose-1.jpg     # 演示姿态图片1
│   ├── demo-pose-2.jpg     # 演示姿态图片2
│   └── demo-pose-3.jpg     # 演示姿态图片3
├── main.js                 # 主要JavaScript逻辑
├── interaction.md          # 交互设计文档
├── design.md              # 视觉设计文档
└── outline.md             # 项目结构文档
```

## 主要功能模块

### 1. index.html 页面结构
- **Header区域**: 应用标题和导航
- **左侧面板**: 分类管理区域
  - 分类卡片列表
  - 添加分类按钮
  - 样本采集控制
- **中间面板**: 训练控制区域
  - 训练参数设置
  - 训练进度显示
  - 训练历史记录
- **右侧面板**: 模型使用区域
  - 模型状态显示
  - 实时检测结果
  - 模型下载功能

### 2. JavaScript功能模块
- **分类管理模块 (ClassManager)**
  - 添加/编辑/删除分类
  - 分类数据持久化
  - 样本计数管理

- **样本采集模块 (SampleCollector)**
  - 摄像头控制和拍照
  - 文件上传处理
  - 图像预处理

- **姿态检测模块 (PoseDetector)**
  - MoveNet模型集成
  - 姿态关键点提取
  - 特征向量生成

- **训练模块 (ModelTrainer)**
  - 迁移学习实现
  - 训练进度监控
  - 模型保存和导出

- **预测模块 (ModelPredictor)**
  - 实时视频分析
  - 分类结果展示
  - 置信度计算

### 3. 核心库集成
- **ml5.js**: 机器学习基础库
- **TensorFlow.js**: 深度学习框架
- **Anime.js**: 动画效果库
- **p5.js**: 创意编程和背景效果
- **ECharts.js**: 数据可视化
- **JSZip**: 模型文件打包

### 4. 数据流设计
```
用户输入 → 分类管理 → 样本采集 → 姿态检测 → 特征提取 → 模型训练 → 模型导出/使用
```

### 5. 状态管理
- **分类状态**: 分类列表、当前选中分类
- **样本状态**: 每个分类的样本集合
- **训练状态**: 训练进度、模型状态
- **检测状态**: 摄像头状态、检测结果

## 技术实现要点

### 1. 模型架构
- 使用MoveNet作为特征提取器
- 添加自定义全连接层进行分类
- 实现迁移学习训练流程

### 2. 性能优化
- 图像压缩和预处理
- 批量训练数据处理
- 内存管理和垃圾回收

### 3. 用户体验
- 响应式设计适配
- 加载状态反馈
- 错误处理和提示
- 操作确认对话框

### 4. 数据持久化
- LocalStorage存储分类和样本信息
- IndexedDB存储训练好的模型
- 模型文件的导入导出